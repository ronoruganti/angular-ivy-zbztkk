{"ast":null,"code":"import { of } from 'rxjs';\nimport { HackerNewsApiService } from './hacker-news-api.service';\nlet httpClientSpy;\nlet hackerNewsService;\ndescribe('HackerNewsApiService', () => {\n  beforeEach(() => {\n    // TODO: spy on other methods too\n    httpClientSpy = jasmine.createSpyObj('HttpClient', ['get']);\n    hackerNewsService = new HackerNewsApiService(httpClientSpy);\n  });\n  it('should return expected array of news stories (HttpClient called once)', done => {\n    const expectedStories = [{\n      title: '',\n      url: 'A'\n    }, {\n      title: '',\n      url: 'B'\n    }];\n    httpClientSpy.get.and.returnValue(of(expectedStories));\n    hackerNewsService.getLatestStories().subscribe({\n      next: stories => {\n        expect(stories).withContext('expected stories').toEqual(expectedStories);\n        done();\n      },\n      error: done.fail\n    });\n    expect(httpClientSpy.get.calls.count()).withContext('one call').toBe(1);\n  });\n});","map":{"version":3,"mappings":"AACA,SAASA,EAAE,QAAoB,MAAM;AACrC,SAASC,oBAAoB,QAAQ,2BAA2B;AAChE,IAAIC,aAAyC;AAC7C,IAAIC,iBAAuC;AAC3CC,QAAQ,CAAC,sBAAsB,EAAE,MAAK;EACpCC,UAAU,CAAC,MAAK;IACd;IACAH,aAAa,GAAGI,OAAO,CAACC,YAAY,CAAC,YAAY,EAAE,CAAC,KAAK,CAAC,CAAC;IAC3DJ,iBAAiB,GAAG,IAAIF,oBAAoB,CAACC,aAAa,CAAC;EAC7D,CAAC,CAAC;EAEFM,EAAE,CAAC,uEAAuE,EAAGC,IAAY,IAAI;IAC3F,MAAMC,eAAe,GACnB,CAAC;MAAEC,KAAK,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAE,EAAE;MAAED,KAAK,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAE,CAAC;IAEpDV,aAAa,CAACW,GAAG,CAACC,GAAG,CAACC,WAAW,CAACf,EAAE,CAACU,eAAe,CAAC,CAAC;IAEtDP,iBAAiB,CAACa,gBAAgB,EAAE,CAACC,SAAS,CAAC;MAC7CC,IAAI,EAAEC,OAAO,IAAG;QACdC,MAAM,CAACD,OAAO,CAAC,CACZE,WAAW,CAAC,kBAAkB,CAAC,CAC/BC,OAAO,CAACZ,eAAe,CAAC;QAC3BD,IAAI,EAAE;MACR,CAAC;MACDc,KAAK,EAAEd,IAAI,CAACe;KACb,CAAC;IACFJ,MAAM,CAAClB,aAAa,CAACW,GAAG,CAACY,KAAK,CAACC,KAAK,EAAE,CAAC,CACpCL,WAAW,CAAC,UAAU,CAAC,CACvBM,IAAI,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC;AAGJ,CAAC,CAAC","names":["of","HackerNewsApiService","httpClientSpy","hackerNewsService","describe","beforeEach","jasmine","createSpyObj","it","done","expectedStories","title","url","get","and","returnValue","getLatestStories","subscribe","next","stories","expect","withContext","toEqual","error","fail","calls","count","toBe"],"sourceRoot":"","sources":["C:\\Users\\Tanuj\\Downloads\\angular-ivy-zbztkk\\src\\app\\hacker-news-api.service.spec.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { of, throwError } from 'rxjs';\r\nimport { HackerNewsApiService } from './hacker-news-api.service';\r\nlet httpClientSpy: jasmine.SpyObj<HttpClient>;\r\nlet hackerNewsService: HackerNewsApiService;\r\ndescribe('HackerNewsApiService', () => {\r\n  beforeEach(() => {\r\n    // TODO: spy on other methods too\r\n    httpClientSpy = jasmine.createSpyObj('HttpClient', ['get']);\r\n    hackerNewsService = new HackerNewsApiService(httpClientSpy);\r\n  });\r\n\r\n  it('should return expected array of news stories (HttpClient called once)', (done: DoneFn) => {\r\n    const expectedStories: Array<any> =\r\n      [{ title: '', url: 'A' }, { title: '', url: 'B' }];\r\n\r\n    httpClientSpy.get.and.returnValue(of(expectedStories));\r\n\r\n    hackerNewsService.getLatestStories().subscribe({\r\n      next: stories => {\r\n        expect(stories)\r\n          .withContext('expected stories')\r\n          .toEqual(expectedStories);\r\n        done();\r\n      },\r\n      error: done.fail\r\n    });\r\n    expect(httpClientSpy.get.calls.count())\r\n      .withContext('one call')\r\n      .toBe(1);\r\n  });\r\n\r\n\r\n});"]},"metadata":{},"sourceType":"module","externalDependencies":[]}